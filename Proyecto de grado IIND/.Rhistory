# Unir todas las bases de datos en una sola
all_data <- rbind(Guaymaral_Por_Dias, MinAmbiente_Por_Dias, Suba_Por_Dias,
Usaquen_Por_Dias, Ferias_Por_Dias, SanCristobal_Por_Dias,
Tunal_Por_Dias, Bolivia_Por_Dias, Carvajal_Por_Dias,
Fontibon_Por_Dias, Kennedy_Por_Dias, PuenteAranda_Por_Dias,
Centro_Por_Dias)
# Limpiar el entorno
rm(list = ls())
## Librerias ------------------
library(pacman)
library(tidyverse) # Paquete grande de manipulacion
library(lubridate) # Paquete para manejo de fechas
library(skimr)     # Paquete para revision de datos
library(stargazer) # Paquete de tablas "bonitas", regs y estad desc
library(dplyr)     # Paquete parte de tidyverse donde esta mutate, select, filter, summarise...
library(rio)       # Paquete de importacion/exportacion de datos
library(gridExtra)
library(patchwork)
library(stats)
library(readxl)
# Manejo del directorio
getwd()
directorio <- "C:/Users/windows/Documents/GitHub/Problem_Set_1/Proyecto-de-grado-IIND/Proyecto de grado IIND/1. Datos"
setwd(directorio)
# Chequeo de los archivos del directorio
dir()
list.files()
## Importacion de los datos ------------------
install_formats() # Cuestiones de importacion de archivos del paquete rio
Guaymaral_Por_Dias <- import("3.1 Guaymaral_Por_Dias.RDS")
MinAmbiente_Por_Dias <- import("3.2 MinAmbiente_Por_Dias.RDS")
Suba_Por_Dias <- import("3.3 Suba_Por_Dias.RDS")
Usaquen_Por_Dias <- import("3.4 Usaquen_Por_Dias.RDS")
Ferias_Por_Dias <- import("3.5 Ferias_Por_Dias.RDS")
SanCristobal_Por_Dias <- import("3.6 SanCristobal_Por_Dias.RDS")
Tunal_Por_Dias <- import("3.7 Tunal_Por_Dias.RDS")
Bolivia_Por_Dias <- import("3.8 Bolivia_Por_Dias.RDS")
Carvajal_Por_Dias <- import("3.9 Carvajal_Por_Dias.RDS")
Fontibon_Por_Dias <- import("3.10 Fontibon_Por_Dias.RDS")
Kennedy_Por_Dias <- import("3.11 Kennedy_Por_Dias.RDS")
PuenteAranda_Por_Dias <- import("3.12 PuenteAranda_Por_Dias.RDS")
Centro_Por_Dias <- import("3.13 Centro_Por_Dias.RDS")
# Unir todas las bases de datos en una sola
all_data <- rbind(Guaymaral_Por_Dias, MinAmbiente_Por_Dias, Suba_Por_Dias,
Usaquen_Por_Dias, Ferias_Por_Dias, SanCristobal_Por_Dias,
Tunal_Por_Dias, Bolivia_Por_Dias, Carvajal_Por_Dias,
Fontibon_Por_Dias, Kennedy_Por_Dias, PuenteAranda_Por_Dias,
Centro_Por_Dias)
# Revisar los primeros registros para confirmar que la unión es correcta
head(all_data)
all_data
View(all_data)
view(all_data)
str(all_data)
head(all_data)
# Importar base vacia
Bogota_Promedio_Dias <- read_excel("2. Datos (2021 -2024) - Diarios.xlsx")
view(Bogota_Promedio_Dias)
# Renombrar la variable "myday" como "day"
all_data$day <- all_data$myday
View(all_data)
# Eliminar la variable original "myday"
if (exists("myday")) {
rm(myday)
}
View(all_data)
View(all_data)
# Eliminar la variable original "myday"
if (exists("myday")) {
rm(myday)
}
View(all_data)
View(Bogota_Promedio_Dias)
head(all_data)
View(all_data)
# Calcula los promedios diarios de cada contaminante y otras variables
promedios_diarios <- all_data %>%
group_by(day) %>%
summarise(across(.cols = c(o3, no2, pm25, co, so2, pm10, bc, tmp, rh, rain, radsolar, co2, ws), .fns = ~mean(.x, na.rm = TRUE)))
# Renombrar la columna de fecha en promedios_diarios para coincidir con Bogota_Promedio_Dias
promedios_diarios <- rename(promedios_diarios, myday = day)
# Uniendo los datos
Bogota_Promedio_Dias <- left_join(Bogota_Promedio_Dias, promedios_diarios, by = "myday")
View(Bogota_Promedio_Dias)
# Limpiar el entorno
rm(list = ls())
## Librerias ------------------
library(pacman)
library(tidyverse) # Paquete grande de manipulacion
library(lubridate) # Paquete para manejo de fechas
library(skimr)     # Paquete para revision de datos
library(stargazer) # Paquete de tablas "bonitas", regs y estad desc
library(dplyr)     # Paquete parte de tidyverse donde esta mutate, select, filter, summarise...
library(rio)       # Paquete de importacion/exportacion de datos
library(gridExtra)
library(patchwork)
library(stats)
library(readxl)
library(writexl)
# Manejo del directorio
getwd()
directorio <- "C:/Users/windows/Documents/GitHub/Problem_Set_1/Proyecto-de-grado-IIND/Proyecto de grado IIND/1. Datos"
setwd(directorio)
# Chequeo de los archivos del directorio
dir()
list.files()
## Importacion de los datos ------------------
install_formats() # Cuestiones de importacion de archivos del paquete rio
Guaymaral_Por_Dias <- import("3.1 Guaymaral_Por_Dias.RDS")
MinAmbiente_Por_Dias <- import("3.2 MinAmbiente_Por_Dias.RDS")
Suba_Por_Dias <- import("3.3 Suba_Por_Dias.RDS")
Usaquen_Por_Dias <- import("3.4 Usaquen_Por_Dias.RDS")
Ferias_Por_Dias <- import("3.5 Ferias_Por_Dias.RDS")
SanCristobal_Por_Dias <- import("3.6 SanCristobal_Por_Dias.RDS")
Tunal_Por_Dias <- import("3.7 Tunal_Por_Dias.RDS")
Bolivia_Por_Dias <- import("3.8 Bolivia_Por_Dias.RDS")
Carvajal_Por_Dias <- import("3.9 Carvajal_Por_Dias.RDS")
Fontibon_Por_Dias <- import("3.10 Fontibon_Por_Dias.RDS")
Kennedy_Por_Dias <- import("3.11 Kennedy_Por_Dias.RDS")
PuenteAranda_Por_Dias <- import("3.12 PuenteAranda_Por_Dias.RDS")
Centro_Por_Dias <- import("3.13 Centro_Por_Dias.RDS")
# Unir todas las bases de datos en una sola
all_data <- rbind(Guaymaral_Por_Dias, MinAmbiente_Por_Dias, Suba_Por_Dias,
Usaquen_Por_Dias, Ferias_Por_Dias, SanCristobal_Por_Dias,
Tunal_Por_Dias, Bolivia_Por_Dias, Carvajal_Por_Dias,
Fontibon_Por_Dias, Kennedy_Por_Dias, PuenteAranda_Por_Dias,
Centro_Por_Dias)
# Exprtar data
write_xlsx(all_data, "C:/Users/windows/Documents/GitHub/Problem_Set_1/Proyecto-de-grado-IIND/Proyecto de grado IIND/1. Datos/Estaciones_Por_Dias.xlsx")
# Limpiar el entorno
rm(list = ls())
## Librerias ------------------
library(pacman)
library(tidyverse) # Paquete grande de manipulacion
library(lubridate) # Paquete para manejo de fechas
library(skimr)     # Paquete para revision de datos
library(stargazer) # Paquete de tablas "bonitas", regs y estad desc
library(dplyr)     # Paquete parte de tidyverse donde esta mutate, select, filter, summarise...
library(rio)       # Paquete de importacion/exportacion de datos
library(gridExtra)
library(patchwork)
library(stats)
library(readxl)
# Manejo del directorio
getwd()
directorio <- "C:/Users/windows/Documents/GitHub/Problem_Set_1/Proyecto-de-grado-IIND/Proyecto de grado IIND/1. Datos"
setwd(directorio)
# Chequeo de los archivos del directorio
dir()
list.files()
# Importar datos
Centro_Por_Horas <- read_excel("1. Datos (2021 -2024) - Por Horas.xlsx",
sheet = "Centro de Alto Rendimiento")
Centro_Por_Dias <- read_excel("2. Datos (2021 -2024) - Diarios.xlsx")
# Calculo de promedios
promedios_diarios <- Centro_Por_Horas %>%
group_by(Dia) %>%
summarise(
pm10_avg = mean(PM10, na.rm = TRUE),
tmp_avg = mean(Temperatura, na.rm = TRUE),
ws_avg = mean(VelViento, na.rm = TRUE),
rh_avg = mean(HR, na.rm = TRUE),
rain_avg = mean(Precipitacion, na.rm = TRUE),
radsolar_avg = mean(RadSolar, na.rm = TRUE),
o3_avg = mean(OZONO, na.rm = TRUE),
no2_avg = mean(NO2, na.rm = TRUE),
pm25_avg = mean(PM25, na.rm = TRUE),
co_avg = mean(CO, na.rm = TRUE),
so2_avg = mean(SO2, na.rm = TRUE),
bc_avg = mean(BC, na.rm = TRUE),
co2_avg = mean(CO2, na.rm = TRUE)
)
Centro_Por_Dias <- Centro_Por_Dias %>%
left_join(promedios_diarios, by = c("myday" = "Dia")) %>%
mutate(
pm10 = if_else(is.na(pm10), pm10_avg, pm10),
tmp = if_else(is.na(tmp), tmp_avg, tmp),
ws = if_else(is.na(ws), ws_avg, ws),
rh = if_else(is.na(rh), rh_avg, rh),
rain = if_else(is.na(rain), rain_avg, rain),
radsolar = if_else(is.na(radsolar), radsolar_avg, radsolar),
o3 = if_else(is.na(o3), o3_avg, o3),
no2 = if_else(is.na(no2), no2_avg, no2),
pm25 = if_else(is.na(pm25), pm25_avg, pm25),
co = if_else(is.na(co), co_avg, co),
so2 = if_else(is.na(so2), so2_avg, so2),
bc = if_else(is.na(bc), bc_avg, bc),
co2 = if_else(is.na(co2), co2_avg, co2)
) %>%
select(-ends_with("_avg"))  # Elimina las columnas de promedios temporales
View(Centro_Por_Dias)
# Manejo del directorio
getwd()
directorio <- "C:/Users/windows/Documents/GitHub/Problem_Set_1/Proyecto-de-grado-IIND/Proyecto de grado IIND/1. Datos"
## Importacion de los datos ------------------
install_formats() # Cuestiones de importacion de archivos del paquete rio
Centro_Por_Dias <- import("3.13 Centro_Por_Dias.RDS")
View(Centro_Por_Dias)
# Importar datos
Centro_Por_Horas <- read_excel("1. Datos (2021 -2024) - Por Horas.xlsx",
sheet = "Centro de Alto Rendimiento")
Centro_Por_Dias <- read_excel("2. Datos (2021 -2024) - Diarios.xlsx")
# Calculo de promedios
promedios_diarios <- Centro_Por_Horas %>%
group_by(Dia) %>%
summarise(
pm10_avg = mean(PM10, na.rm = TRUE),
tmp_avg = mean(Temperatura, na.rm = TRUE),
ws_avg = mean(VelViento, na.rm = TRUE),
rh_avg = mean(HR, na.rm = TRUE),
rain_avg = mean(Precipitacion, na.rm = TRUE),
radsolar_avg = mean(RadSolar, na.rm = TRUE),
o3_avg = mean(OZONO, na.rm = TRUE),
no2_avg = mean(NO2, na.rm = TRUE),
pm25_avg = mean(PM25, na.rm = TRUE),
co_avg = mean(CO, na.rm = TRUE),
so2_avg = mean(SO2, na.rm = TRUE),
bc_avg = mean(BC, na.rm = TRUE),
co2_avg = mean(CO2, na.rm = TRUE)
)
Centro_Por_Dias <- Centro_Por_Dias %>%
left_join(promedios_diarios, by = c("myday" = "Dia")) %>%
mutate(
pm10 = if_else(is.na(pm10), pm10_avg, pm10),
tmp = if_else(is.na(tmp), tmp_avg, tmp),
ws = if_else(is.na(ws), ws_avg, ws),
rh = if_else(is.na(rh), rh_avg, rh),
rain = if_else(is.na(rain), rain_avg, rain),
radsolar = if_else(is.na(radsolar), radsolar_avg, radsolar),
o3 = if_else(is.na(o3), o3_avg, o3),
no2 = if_else(is.na(no2), no2_avg, no2),
pm25 = if_else(is.na(pm25), pm25_avg, pm25),
co = if_else(is.na(co), co_avg, co),
so2 = if_else(is.na(so2), so2_avg, so2),
bc = if_else(is.na(bc), bc_avg, bc),
co2 = if_else(is.na(co2), co2_avg, co2)
) %>%
select(-ends_with("_avg"))  # Elimina las columnas de promedios temporales
summary(Centro_Por_Dias)
# Guardar como archivo .RDS:
saveRDS(Centro_Por_Dias, "C:/Users/windows/Documents/GitHub/Problem_Set_1/Proyecto-de-grado-IIND/Proyecto de grado IIND/1. Datos/Centro_Por_Dias.rds")
# Limpiar el entorno
rm(list = ls())
## Librerias ------------------
library(pacman)
library(tidyverse) # Paquete grande de manipulacion
library(lubridate) # Paquete para manejo de fechas
library(skimr)     # Paquete para revision de datos
library(stargazer) # Paquete de tablas "bonitas", regs y estad desc
library(dplyr)     # Paquete parte de tidyverse donde esta mutate, select, filter, summarise...
library(rio)       # Paquete de importacion/exportacion de datos
library(gridExtra)
library(patchwork)
library(stats)
library(readxl)
library(writexl)
# Manejo del directorio
getwd()
directorio <- "C:/Users/windows/Documents/GitHub/Problem_Set_1/Proyecto-de-grado-IIND/Proyecto de grado IIND/1. Datos"
setwd(directorio)
# Chequeo de los archivos del directorio
dir()
list.files()
## Importacion de los datos ------------------
install_formats() # Cuestiones de importacion de archivos del paquete rio
Guaymaral_Por_Dias <- import("3.1 Guaymaral_Por_Dias.RDS")
MinAmbiente_Por_Dias <- import("3.2 MinAmbiente_Por_Dias.RDS")
Suba_Por_Dias <- import("3.3 Suba_Por_Dias.RDS")
Usaquen_Por_Dias <- import("3.4 Usaquen_Por_Dias.RDS")
Ferias_Por_Dias <- import("3.5 Ferias_Por_Dias.RDS")
SanCristobal_Por_Dias <- import("3.6 SanCristobal_Por_Dias.RDS")
Tunal_Por_Dias <- import("3.7 Tunal_Por_Dias.RDS")
Bolivia_Por_Dias <- import("3.8 Bolivia_Por_Dias.RDS")
Carvajal_Por_Dias <- import("3.9 Carvajal_Por_Dias.RDS")
Fontibon_Por_Dias <- import("3.10 Fontibon_Por_Dias.RDS")
Kennedy_Por_Dias <- import("3.11 Kennedy_Por_Dias.RDS")
PuenteAranda_Por_Dias <- import("3.12 PuenteAranda_Por_Dias.RDS")
Centro_Por_Dias <- import("3.13 Centro_Por_Dias.RDS")
View(Centro_Por_Dias)
# Unir todas las bases de datos en una sola
all_data <- rbind(Guaymaral_Por_Dias, MinAmbiente_Por_Dias, Suba_Por_Dias,
Usaquen_Por_Dias, Ferias_Por_Dias, SanCristobal_Por_Dias,
Tunal_Por_Dias, Bolivia_Por_Dias, Carvajal_Por_Dias,
Fontibon_Por_Dias, Kennedy_Por_Dias, PuenteAranda_Por_Dias,
Centro_Por_Dias)
# Exprtar data
write_xlsx(all_data, "C:/Users/windows/Documents/GitHub/Problem_Set_1/Proyecto-de-grado-IIND/Proyecto de grado IIND/1. Datos/Estaciones_Por_Dias.xlsx")
# Exprtar data
write_xlsx(all_data, "C:/Users/windows/Documents/GitHub/Problem_Set_1/Proyecto-de-grado-IIND/Proyecto de grado IIND/1. Datos/4. Estaciones_Por_Dias.xlsx")
head(all_data)
# Renombrar la variable "myday" como "day"
all_data$day <- all_data$myday
# Importar base vacia
Bogota_Promedio_Dias <- read_excel("2. Datos (2021 -2024) - Diarios.xlsx")
view(Bogota_Promedio_Dias)
# Calcula los promedios diarios de cada contaminante y otras variables
promedios_diarios <- all_data %>%
group_by(day) %>%
summarise(across(.cols = c(o3, no2, pm25, co, so2, pm10, bc, tmp, rh, rain, radsolar, co2, ws), .fns = ~mean(.x, na.rm = TRUE)))
# Asegurándonos de que las fechas están en formato de fecha si no lo están
promedios_diarios$day <- as.Date(promedios_diarios$day)
Bogota_Promedio_Dias$myday <- as.Date(Bogota_Promedio_Dias$myday)
# Renombrar la columna de fecha en promedios_diarios para coincidir con Bogota_Promedio_Dias
promedios_diarios <- rename(promedios_diarios, myday = day)
# Uniendo los datos
Bogota_Promedio_Dias <- left_join(Bogota_Promedio_Dias, promedios_diarios, by = "myday")
view(Bogota_Promedio_Dias)
head(Bogota_Promedio_Dias)
view(Bogota_Promedio_Dias)
rm(o3.x, no2.x, pm25.x, co.x, so2.x, pm10.x, bc.x, tmp.x, rh.x,rain.x, radsolar.x, co2.x, ws.x)
view(Bogota_Promedio_Dias)
lapply(o3.x, no2.x, pm25.x, co.x, so2.x, pm10.x, bc.x, tmp.x, rh.x,rain.x, radsolar.x, co2.x, ws.x, rm)
view(Bogota_Promedio_Dias)
library(pacman)
library(tidyverse) # Paquete grande de manipulacion
library(lubridate) # Paquete para manejo de fechas
library(skimr)     # Paquete para revision de datos
library(stargazer) # Paquete de tablas "bonitas", regs y estad desc
library(dplyr)     # Paquete parte de tidyverse donde esta mutate, select, filter, summarise...
library(rio)       # Paquete de importacion/exportacion de datos
library(gridExtra)
library(patchwork)
library(stats)
library(readxl)
library(writexl)
# Eliminar columnas que terminan en ".x" y están completamente vacías
Bogota_Promedio_Dias <- Bogota_Promedio_Dias %>%
select(-matches("\\.x$")) %>%
select_if(~ !all(is.na(.)))
# Verificar el resultado
str(Bogota_Promedio_Dias)
View(Bogota_Promedio_Dias)
head(Bogota_Promedio_Dias)
# Renombrar variables quitando el sufijo ".y"
Bogota_Promedio_Dias <- Bogota_Promedio_Dias %>%
rename_with(~ gsub("\\.y$", "", .x), ends_with(".y"))
# Verificar los cambios
names(Bogota_Promedio_Dias)
view(Bogota_Promedio_Dias)
# Guardar como archivo .RDS:
saveRDS(Bogota_Promedio_Dias, "C:/Users/windows/Documents/GitHub/Problem_Set_1/Proyecto-de-grado-IIND/Proyecto de grado IIND/1. Datos/4. Bogota_Promedio_Dias.rds")
# Limpiar el entorno
rm(list = ls())
## Instalación de paquetes ------------------
#install.packages("pacman")
library(pacman)
p_load(tidyverse,  # Paquete grande de manipulacion
lubridate,  # Paquete para manejo de fechas
skimr,      # Paquete para revision de datos
stargazer,  # Paquete de tablas "bonitas", regs y estad desc
dplyr,      # Paquete parte de tidyverse donde esta mutate, select, filter, summarise...
rio,        # Paquete de importacion/exportacion de datos
gridExtra, patchwork, stats)
# Manejo del directorio
getwd()
directorio <- "C:/Users/windows/Documents/Andes/Semestre_10/Control de la contaminacion/Actividades/Lab 6"
setwd(directorio)
# Chequeo de los archivos del directorio
dir()
list.files()
## Importacion de los datos ------------------
install_formats() # Cuestiones de importacion de archivos del paquete rio
data <- import("Probability_of_Exceedances.xls")
